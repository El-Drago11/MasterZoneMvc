<script>

    var UserToken_Global_Layout = "";

$(document).ready(function () {
    $(".commonNavLinkClass").removeClass("active");
    $(".commonSubNavLinkClass").removeClass("active");
    //$("#li_ManageReports_Sidebar").removeClass("menu-open");

    $.get("/SuperAdmin/GetSuperAdminToken", null, function (dataAdminToken) {
        if (dataAdminToken != "" && dataAdminToken != null) {

            UserToken_Global_Layout = dataAdminToken;

            //--Set Active Link in Sidebar
            SetSideBarLink();

            ////--Get Staff-Profile Info
            //GetAdminProfileDetail_Layout();
        }
        else {

            //$.get("/SubAdmin/GetSubAdminCookieDetail", null, function (dataSubAdminToken) {
            //    if (dataSubAdminToken != "" && dataSubAdminToken != null) {

            //        UserToken_Global_Layout = dataSubAdminToken;

            //        //--Get Staff-Profile Info
            //        GetStaffProfileDetail_Layout();
            //    }
            //    else {

            //    }
            //});
        }
    });
});

function GetAdminProfileDetail_Layout() {

    $("#img_Admin_AdminLayout").attr("src", "");
    $("#a_Admin_AdminLayout").html("");

    $.ajax({
        type: "GET",
        url: "/GetAdminProfile",
        headers: {
            "Authorization": "Bearer " + UserToken_Global_Layout,
            "Content-Type": "application/json"
        },
        contentType: 'application/json',
        success: function (dataAdminLayout) {
            var str = dataAdminLayout.data.Admin;
            if (dataAdminLayout.data.Admin != null) {



                $("#img_Admin_AdminLayout").attr("src", "/Content/AdminImages/" + dataAdminLayout.data.Admin.ProfileImage);
                $("#a_Admin_AdminLayout").html(dataAdminLayout.data.Admin.FirstName + " " + dataAdminLayout.data.Admin.LastName);
                $("#li_InstituteName_AdminLayout").html(dataAdminLayout.data.Admin.InstituteName);

            }

            //--Set Active Link in Sidebar
            SetSideBarLink();
        },
        error: function (result) {

            //--Set Active Link in Sidebar
            SetSideBarLink();

            if (result["status"] == 401) {
                $.iaoAlert({
                    msg: '@(Resources.ErrorMessage.UnAuthorizedErrorMessage)',
                    type: "error",
                    mode: "dark",
                });
            }
            else {
                $.iaoAlert({
                    msg: '@(Resources.ErrorMessage.TechincalErrorMessage)',
                    type: "error",
                    mode: "dark",
                });
            }
        }
    });
}

function GetStaffProfileDetail_Layout() {

    $("#img_Staff_StaffLayout").attr("src", "");
    $("#a_Staff_StaffLayout").html("");
    $("#li_BranchName_StaffLayout").html("");

    $.ajax({
        type: "GET",
        url: "/GetStaffProfile",
        headers: {
            "Authorization": "Bearer " + UserToken_Global_Layout,
            "Content-Type": "application/json"
        },
        contentType: 'application/json',
        success: function (dataStaffLayout) {

            if (dataStaffLayout.data.staff != null) {

                $("#li_BranchName_StaffLayout").html(dataStaffLayout.data.staff.BranchName);

                $("#img_Staff_StaffLayout").attr("src", "/Content/StaffImages/" + dataStaffLayout.data.staff.ProfileImage);
                $("#a_Staff_StaffLayout").html(dataStaffLayout.data.staff.FirstName + " " + dataStaffLayout.data.staff.LastName);

            }

            //--Set Active Link in Sidebar
            SetSideBarLink();
        },
        error: function (result) {

            //--Set Active Link in Sidebar
            SetSideBarLink();

            if (result["status"] == 401) {
                $.iaoAlert({
                    msg: '@(Resources.ErrorMessage.UnAuthorizedErrorMessage)',
                    type: "error",
                    mode: "dark",
                });
            }
            else {
                $.iaoAlert({
                    msg: '@(Resources.ErrorMessage.TechincalErrorMessage)',
                    type: "error",
                    mode: "dark",
                });
            }
        }
    });
}

function SetSideBarLink() {
    //--Get Selected Sidebar Page Link Value
    $.get("/SuperAdmin/GetSidebarCookieDetail", null, function (dataSidebar) {

        //$('.commonNavLinkClass').removeClass('active');

        // Dashboard
        if (dataSidebar == "dashboard") {
            $("#a_Dashboard_Sidebar").addClass("active");
        }
        //--Manage Categories
        else if (dataSidebar == "manageCategories") {
            $("#a_ManageCategories_Sidebar").addClass("active");
        }
        //--Manage Advertisements
        else if (dataSidebar == "manageAdvertisements") {
            $("#a_ManageAdvertisements_Sidebar").addClass("active");
        }
        //--Manage Pay-Fee
        else if (dataSidebar == "managePayFee") {
            $("#a_ManagePayFee_Sidebar").addClass("active");
            $("#a_ManageFees_Sidebar").addClass("active");

            $("#li_ManageFees_Sidebar").addClass("menu-open");
        }
        // Change Password
        else if (dataSidebar == "changePassword") {
            $("#a_ChangePassword_Sidebar").addClass("active");
        }
        // Manage Profile
        else if (dataSidebar == "manageProfile") {
            //$("#a_ManageDiscount_Sidebar").addClass("active");
        }
        //--Manage Pay-Other-Charges
        else if (dataSidebar == "managePayOtherCharges") {
            $("#a_ManagePayOtherCharges_Sidebar").addClass("active");
            $("#a_ManageFees_Sidebar").addClass("active");

            $("#li_ManageFees_Sidebar").addClass("menu-open");
        }
    });
}

function LogoutUser() {
    StartLoading();
    $.get("/Login/LogoutUser", null, function () {
        window.location = "/Login/Index";
    });
}
</script>
