<script>

    function submitOTP() {
        let _otp = $("#txtOtp").val().trim();
        let _error_txtOtp = $("#error_txtOtp");
        var is_valid = true;
        if (validate_IsEmptyStringInputFieldValue(_otp)) {
            is_valid = false;
            _error_txtOtp.html('Please enter the OTP !!');
        }
        let _email = $("#txtEmail").val().trim();
        if (validate_IsEmptyStringInputFieldValue(_email)) {
            is_valid = false;
        }
        let _firstName = $("#txtFirstName").val().trim();
        if (validate_IsEmptyStringInputFieldValue(_firstName)) {
            is_valid = false;
            _error_firstName.html('@(Resources.VisitorPanel.FirstNameRequired)');
        }
        let _lastName = $("#txtLastName").val().trim();
        if (validate_IsEmptyStringInputFieldValue(_lastName)) {
            is_valid = false;
            _error_lastName.html('@(Resources.VisitorPanel.LastNameRequired)');
        }

        if (is_valid) {
            var data = new FormData();

            data.append("OTP", _otp);
            data.append("Email", _email);
            data.append("FirstName", _firstName);
            data.append("LastName", _lastName);

            $.ajax({
                url: '/Home/VerifyOtp',
                data: data,
                processData: false,
                mimeType: 'multipart/form-data',
                contentType: false,
                //contentType: 'application/json',
                type: 'POST',
                success: function (dataResponse) {
                    //--Parse into Json of response-json-string
                    dataResponse = JSON.parse(dataResponse);

                    //--If successfully added
                    if (dataResponse.status === 1) {
                        //swal("Success!", dataResponse.message, "success");
                        window.location.href = '/Home/MyClass/';
                    }
                    else {
                        $.iaoAlert({
                            msg: dataResponse.message,
                            type: "error",
                            mode: "dark",
                        });

                        StopLoading();
                    }

                },
                error: function (result) {
                    StopLoading();

                    if (result["status"] == 401) {
                        $.iaoAlert({
                            msg: '@(Resources.ErrorMessage.UnAuthorizedErrorMessage)',
                            type: "error",
                            mode: "dark",
                        });
                    }
                    else {
                        $.iaoAlert({
                            msg: '@(Resources.ErrorMessage.TechincalErrorMessage)',
                            type: "error",
                            mode: "dark",
                        });

                    }
                }
            });
        }
    }

function btnRegisterClick() {

    //$("#otp-details").removeClass('d-none')
    //$("#sign-up-details").addClass('d-none')
    //return;

    let is_valid = true;
    $(".error-class").html('');


    let _firstName = $("#txtFirstName").val().trim();
    let _lastName = $("#txtLastName").val().trim();
    let _email = $("#txtEmail").val().trim();
    let _Phonenumber = $("#txtPhoneNumber").val().trim();
    let _password = $("#txtPassword").val().trim();
    let _confirmPassword = $("#txtConfirmPassword").val().trim();
    let _selectedgender = $("#ddlGender").val();
    let _Checkbox_termCondition = $("#term_Conditon").prop('checked');

    let _error_firstName = $("#error_txtFirstName");
    let _error_lastName = $("#error_txtLastName");
    let _error_email = $("#error_txtEmail");
    let _error_phoneNumber = $("#error_txtPhoneNumber");
    let _error_password = $("#error_txtPassword");
    let _error_confirmPassword = $("#error_txtConfirmPassword");
    let _error_selectedgender = $("#error_ddlGender");
    let _error_checkbox = $("#error_checkboxmessage");

    var TestEmail = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    var phone_test = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;

       


    if (validate_IsEmptyStringInputFieldValue(_firstName)) {
        is_valid = false;
        _error_firstName.html('@(Resources.VisitorPanel.FirstNameRequired)');
    }
    if (validate_IsEmptyStringInputFieldValue(_lastName)) {
        is_valid = false;
        _error_lastName.html('@(Resources.VisitorPanel.LastNameRequired)');
    }

    if (validate_IsEmptyStringInputFieldValue(_Phonenumber)) {
        is_valid = false;
          _error_phoneNumber.html('Phone Number Required !!');
    }

    if (phone_test.test(_Phonenumber)) {
        console.log(_Phonenumber + ' is a valid phone number');
    }else {
        is_valid = false;
        _error_phoneNumber.html('Enter a valid Phone Number!!');
    }

    if (validate_IsEmptyStringInputFieldValue(_password)) {
        is_valid = false;
        _error_password.html('@(Resources.VisitorPanel.PasswordRequired)');
    }

    else if (validate_IsEmptyStringInputFieldValue(_confirmPassword)) {
        is_valid = false;
        _error_confirmPassword.html('@(Resources.VisitorPanel.ConfirmPasswordRequired)');
    }
    else if (_confirmPassword != _password) {
        is_valid = false;
        _error_confirmPassword.html("@(Resources.VisitorPanel.PasswordNotMatch_ErrorMessage)");
    }


    if (validate_IsEmptyStringInputFieldValue(_email)) {
        is_valid = false;
        _error_email.html('@(Resources.VisitorPanel.EmailRequired)');
    }
    else if (!TestEmail.test(_email)) {
        is_valid = false;
        _error_email.html('@(Resources.VisitorPanel.ValidEmailRequired)');
    }

    if (validate_IsEmptySelectInputFieldValue(_selectedgender)) {
    is_valid = false;
    _error_selectedgender.html('@(Resources.VisitorPanel.GenderRequired)');
    }
    if (!_Checkbox_termCondition) {
        is_valid = false;
        _error_checkbox.html('Please accept the terms & conditions.');
    }


    if (is_valid) {
        var data = new FormData();
        //var countryPhoneCode = '+64';
        //_selectedgender = _selectedgender.join(',');
        data.append("Email", _email);
        data.append("Password", _password);
        data.append("FirstName", _firstName);
        data.append("LastName", _lastName);
        data.append("Gender", _selectedgender);
        data.append("PhoneNumber", _Phonenumber);

        $.ajax({
            url: '/Home/Register',
            data: data,
            processData: false,
            mimeType: 'multipart/form-data',
            contentType: false,
            //contentType: 'application/json',
            type: 'POST',
            success: function (dataResponse) {
                //--Parse into Json of response-json-string
                dataResponse = JSON.parse(dataResponse);

                //--If successfully added
                if (dataResponse.status === 1) {
                    //swal("Success!", dataResponse.message, "success");
                    //window.location.href = '/Home/MyClass/';
                    $("#otp-details").removeClass('d-none')
                    $("#sign-up-details").addClass('d-none')
                }
                else {
                    $.iaoAlert({
                        msg: dataResponse.message,
                        type: "error",
                        mode: "dark",
                    });

                    StopLoading();
                }

            },
            error: function (result) {
                StopLoading();

                if (result["status"] == 401) {
                    $.iaoAlert({
                        msg: '@(Resources.ErrorMessage.UnAuthorizedErrorMessage)',
                        type: "error",
                        mode: "dark",
                    });
                }
                else {
                    $.iaoAlert({
                        msg: '@(Resources.ErrorMessage.TechincalErrorMessage)',
                        type: "error",
                        mode: "dark",
                    });

                }
            }
        });
    }

}


////// -----------    FIELD VALIDATION HANDLER FUNCTIONS  --------------------------

const validate_IsEmptyStringInputFieldValue = function (inputFieldValue) {
    if (inputFieldValue == '' || inputFieldValue.replace(/\s/g, "") == "")
        return true;
    return false;
}

const validate_IsEmptySelectInputFieldValue = function (inputFieldValue) {
    if (inputFieldValue == undefined || inputFieldValue == null || inputFieldValue == '' || inputFieldValue == 0)
        return true;
    return false;
}
////// -----------    FIELD VALIDATION HANDLER FUNCTIONS  --------------------------
</script>
